<input type="checkbox" id="new-map-modal" class="modal-toggle"/>
<div class="modal modal-bottom sm:modal-middle" data-controller="map-link">
  <div class="modal-box">
    <h3 id="card-title" class="font-bold text-lg mb-6">Create or Join a Map</h3>

    <div id="initial-form" class="">
      <!-- Option 1: Create New Map -->
      <div class="mb-4">
        <%= link_to new_map_path, class: "btn btn-success btn-block", data:{testid: "new_map_path_button"} do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5 stroke-current mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
          </svg>
          Create New Map
        <% end %>
      </div>

      <!-- Option 2: Join Existing Map -->
      <div class="mb-6">
        <button class="btn btn-primary btn-block" data-action="click->map-link#toggleJoinMapForm">Join Existing Map</button>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5 stroke-current mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
          </svg>
      </div>
    </div>

    <!-- Join Map Form (initially hidden) -->
    <div id="join-map-form" class="hidden">
      <div class="form-control mb-4">
        <label for="map-link-input" class="label">
          <span class="label-text">Enter Map Link Code:</span>
        </label>
        <input id="map-link-input" type="text" placeholder="Map Link Code" class="input input-bordered w-full"/>
      </div>

      <!-- Action buttons in lower-right -->
      <div class="flex justify-end space-x-2">
        <button class="btn btn-ghost" data-action="click->map-link#cancelJoinMap">Cancel</button>
        <button class="btn btn-success" data-action="click->map-link#acceptJoinMap">Accept</button>
      </div>
    </div>

    <!-- Close button -->
    <div class="modal-action">
      <label for="new-map-modal" class="btn btn-ghost">Close</label>
    </div>
  </div>
</div>